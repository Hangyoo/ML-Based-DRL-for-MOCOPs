import matplotlib.pyplot as plt
import pandas as pd
import numpy as np
 
def route_split(new):
    new_list = []
    temp = []
    for i in range(len(new)):
        if new[i] == 0:
            if len(temp) > 1:
                temp.append(0)
                new_list.append(temp)
                temp = [0]
            else:
                temp = [0]
        else:
            temp.append(new[i])
    return new_list


#
plt.rcParams['figure.figsize']=(6,6)

# 读取坐标文件
num_nodes = 20
path = r'D:\Paper Data\paper 3\instance\CVRP_Random\cvrp_xy{}_2obj.txt'.format(num_nodes)
depot_xy = np.loadtxt(path)[0].tolist()
node_xy = np.loadtxt(path)[1:].tolist()
xy = [depot_xy] + node_xy

# 绘制点和Depot点
plt.scatter(depot_xy[0],depot_xy[1],marker='*',color='r',s=100)
for node in node_xy:
    plt.scatter(node[0],node[1],marker='o',color='#875853',s=50)

# 根据路径绘制曲线

route50 = [ 0, 11, 29, 42, 32, 41, 21, 16, 44,  0, 33, 25, 38, 18, 27, 12,  9, 20,
        28,  0, 39,  3, 45, 40,  2, 30,  0, 14, 19, 10,  4, 15, 50,  5,  0, 13,
        24, 47, 43,  6,  0, 31, 35, 22, 26, 23,  7,  0, 34, 46, 49, 17,  8, 48,
         0, 37, 36,  1,  0,  0]
route20 = [ 0,  8,  6,  7,  0, 12, 11, 20,  1, 18,  0, 17,  5, 10,  9,  2,  4, 16,
         0,  13, 15, 3,19,14,  0,  0,  0,  0,  0,  0]
route100=[  0,   5,  51,  95,  46,  87,  54,  44,  37,  14,   0,  77,  97,  65,
         32,  38,  69,   2,  71,  64,   4,  19,   0,  24,  28,  83,  98,  53,
         27,  59,  67,  62,  42,  17,  26,   0,  41,  47,  85,  16,  80,  23,
         88,  15,  74,   0,  78,  35,  61,  36,  56,  30,  93,  58,  43,   0,
         57,  70,  72,  55,  63,  20,  39,  22,  82,   0,   1,  10,  92,  96,
         12,  66,  81,   9,   0,  25,  52,  29,  90,  68,  45,  84, 100,  34,
          0,  21,   6,  99,  91,  86,  48,  94,   8,  89,   0,  50,  76,  40,
         13,   3,  73,  11,  18,  31,   0,  60,  79,  75,  49,   7,  33,   0,
          0,   0]
route500=[  0, 430, 100,   4,  98, 297, 152,  80,  96, 169, 308, 412, 283, 307,
        371, 344, 214, 378, 195,  46,  29, 188, 449, 421, 127,  25, 239, 104,
        394, 225,  23, 257, 336, 159, 354, 404,  77, 488,  71, 180, 422, 398,
        360,   0, 452, 184, 317, 365,  41, 440, 405, 466, 226,  35, 418, 493,
        301, 120, 224, 275, 392, 295,  40,  45, 178,  60, 313, 271, 327, 132,
        151, 338,  43, 390,  79, 273, 287, 427, 248, 400, 183, 434,   0, 314,
         93, 419, 121, 379,  47, 498, 331, 196, 435, 383, 478, 221, 289, 182,
        233,   6, 138, 258,  32,  92, 133, 462, 368, 424, 235,  36, 438, 140,
         75, 256, 480,  17, 474, 341,   0, 286,   5, 425, 475,  65, 149, 496,
         53, 103, 310, 192, 315, 454, 252, 268, 176, 441, 485, 417, 212, 370,
        167,  87, 276, 351, 319, 230, 106, 163, 243,  78,  62,  28, 156, 402,
         31, 461, 426, 193, 492,  16, 333, 237,   0, 101, 366,  24, 367,  76,
        260, 491, 117,  88,  18, 279, 125,  68,  61, 320, 228, 281, 312, 139,
        272, 206,  95, 451,  91, 280,  94, 386, 373, 160, 134, 131, 136, 407,
        316, 110,   0, 337, 263, 250, 254, 113, 116,  66, 274, 270, 177, 238,
        205, 453, 334, 282, 119, 460, 487, 203, 261,  50, 465, 311, 123, 266,
        363,  49, 414, 265, 339, 229,   2, 232, 154, 294, 358, 204,  69,  19,
        199,   0, 439, 246, 198, 302, 401, 304, 473,  84, 299,  42, 115, 484,
         10,  86, 111, 109,  44, 322, 172,  20, 107,  38, 348, 200, 298, 387,
        186,  81, 181, 406, 305, 362, 364, 244, 211, 145, 471, 174,  72,   0,
        157, 144,  39, 318, 359, 468,  97, 410,  58, 345, 444, 122, 306, 130,
        288, 210, 208, 328, 456, 353,   0, 137, 476, 372, 215, 432, 158, 382,
         59, 467,  21, 168, 415,  54, 251, 146,  26, 164, 155,  13, 150, 216,
        142,  90, 330,  55, 361, 324,   7, 245, 329, 129,  51, 455, 381, 153,
         82, 374, 437, 469, 325,   0, 335, 241, 240, 445, 499, 175,  63, 170,
        108, 356, 350, 403, 340, 494, 495,   3, 126, 293, 411, 112, 194, 161,
        396, 147, 393, 143, 189, 443, 267, 446, 118, 207, 102, 431, 219,  83,
        447,  85,   0, 342, 352, 217, 165, 397, 332, 114, 148,   0, 450, 253,
        179, 290, 481, 185, 384, 296, 209, 486, 408, 347, 369, 223, 197,  27,
        323, 166, 399,  57,  74, 285,  34, 477, 326, 269, 247, 380, 436, 420,
        357,  15,  67, 429, 187,  48,  73, 309, 442, 343, 173, 497, 141,   0,
          1, 222, 191, 483,  56, 264, 375, 227, 135,  22, 355,  89, 201, 459,
        262, 242, 105,  52, 349, 376,  14, 391, 428, 388, 472, 448, 489, 284,
        423, 470,  70, 124, 300, 457,  33,  99,   8, 321,   0, 291,  30, 409,
        482, 278, 220, 395, 162, 433,  64, 377, 389, 500, 479, 234, 416, 490,
        128, 255, 202, 346, 292, 190, 218, 413, 464,   9, 231, 236, 458, 303,
         12, 171, 213, 277, 463, 385,  11, 249,   0,  37, 259,   0]

path = route_split(route20)
# path = [[0, 492, 425, 475, 53,103,331,100,226,430,466,405,440, 498, 41, 379, 496, 149, 121, 65, 419, 310, 47,365, 192, 315, 176, 441, 366, 24, 367, 101, 72, 353, 110, 148, 249, 385,335,179,445,241,240,253, 291, 11, 321, 0],
# [0, 318, 39, 115, 10, 484, 232, 2, 358, 294, 154, 204, 199, 69, 19, 127, 421, 239, 104, 394, 225, 23, 180, 71, 488, 257, 354,404,77,107,348,298,387,288,130,306,208,20,172,322,44,0],
# [0, 410, 42, 363, 229, 339, 25, 188, 449, 29, 46, 43, 390, 265, 414, 49, 287, 338, 195, 151, 79, 427, 258, 138, 273, 378, 248, 214, 344, 295, 371, 392, 132, 183, 400, 6, 32, 434, 233, 182, 266, 0],
# [0, 58, 468, 359, 86, 111, 109, 345, 444, 122, 215, 158, 432, 210, 81, 38, 200, 360, 186, 406, 159, 336, 305, 422, 398, 251, 26, 146, 54, 181, 328, 415, 168, 7, 324, 245, 467, 21, 59, 329, 443, 267, 381, 0],
# [0, 144, 97, 299, 311, 123, 235, 36, 424, 438, 282, 334, 368, 462, 133, 92, 480, 256, 474, 17,221,327,45,40,307,271,178, 275,152, 80, 169, 308, 96, 412, 283,60,313,224,478, 289, 383, 120, 493, 0],
# [0, 84, 465, 460, 119, 453, 140, 75, 341, 87, 301, 297, 418, 98, 4, 35, 196, 435, 167, 370, 276, 351, 319, 230, 163, 106, 243, 78, 62, 28, 156, 177, 205, 238, 270, 274, 116, 0],
# [0, 476, 372, 374, 153, 82, 455, 382, 51, 129, 189, 469, 143, 446, 376, 105, 349,361,330,155,13,164,55,150,216,142,90,52,388,14,428,391,448,472, 242, 489, 262, 284, 459, 83, 141, 0],
# [0, 137, 325, 437, 207, 118, 431, 447, 423, 219, 102, 56, 470, 264, 309, 442, 73, 201, 89, 375, 343, 48, 187, 227, 355, 22, 135, 0],
# [0, 473,304, 401,  487, 254, 113, 66, 402, 212, 31, 417, 485, 461, 250, 50, 302, 364, 244, 198, 246, 439,261, 263, 426, 193, 93, 5, 454,317,252,268,184,452,314,471,286,0],
# [0, 483, 393, 377, 70, 497, 173, 34, 477, 389,0],
# [0, 203, 16, 145, 333, 211, 337, 237, 174, 456, 37, 76, 260, 491, 18, 117, 88, 279, 68, 125, 272,131,320,61, 281, 312, 139, 228, 134, 332, 114, 316, 407, 136, 160, 94, 165, 0],
# [0, 124, 234, 346, 147, 396, 57, 74, 67, 285, 326, 429, 15, 420, 247, 357, 269, 380, 436, 166, 399, 223, 323, 27, 197, 369, 347, 486, 112, 194, 411, 293, 209, 408, 296, 384, 185, 481, 126, 3, 495, 500, 409, 0],
# [0, 157, 99, 33,362, 259, 373, 206, 95, 386, 451, 91, 280, 397, 450, 342, 217, 277, 463, 85, 457, 8, 12, 213, 171, 231, 1, 0],
# [0, 191, 292, 64, 416, 479, 202, 255, 490, 128, 161, 494, 340, 464, 190, 482, 413, 218, 395, 220, 236, 458, 303, 278,352, 108, 356,290, 350, 403, 63, 170, 175, 499, 30, 9, 162, 433, 300, 222, 0]]
for subpath in path:
    print(subpath)
    plt.plot([xy[item][0] for item in subpath],[xy[item][1] for item in subpath],linewidth=2)
    # 标记点的位置
    # for i, txt in enumerate(subpath):
    #     plt.annotate(txt, (xy[txt][0], xy[txt][1]))
plt.scatter(depot_xy[0],depot_xy[1],marker='*',color='r',s=100)
plt.xlabel('X  coordinate',fontsize=13)
plt.ylabel('Y  coordinate',fontsize=13)
plt.tick_params(labelsize=14,pad=5)
plt.show()



